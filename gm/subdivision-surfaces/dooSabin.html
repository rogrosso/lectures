<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="description" content="Geometric Modeling" />
        <meta name="author" content="Roberto Grosso" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Subdivision Surfaces</title>
        <style>
            body {
                font-family: Open Sans, Arial, Geneva, Helvetica, sans-serif;
            }
            div.gm-lecture {
                margin-left: 3em;
                width: 750px;
            }
            .quadSubdivision{
                display: grid;
                width: 300px;
                grid-template-columns: auto auto;
                column-gap: 5px;
            }
            .dooSabin{
                display: grid;
                width: 600px;
                grid-template-columns: auto auto auto auto;
                column-gap: 5px;
            }
        </style>
        <script type="importmap">
            {
                "imports": {
                    "three": "https://unpkg.com/three@0.136.0/build/three.module.js",
                    "OrbitControls": "https://unpkg.com/three@0.136.0/examples/jsm/controls/OrbitControls.js",
                    "GUI": "https://unpkg.com/three@0.136.0/examples/jsm/libs/lil-gui.module.min.js",
                    "colors": "../common/colors.js",
                    "halfedge": "../../common/halfedge.js"
                    //"quadToroidalTetra": "../data/quadToroidalTetra.json",
                    //"hybridCube": "../data/hybridCube.json",
                    //"quadCube": "../data/quadCube.json",
                    //"quadPawn": "../data/quadPawn.json"
                }
            }
        </script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script
            type="text/javascript"
            id="MathJax-script"
            async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
        ></script>
        <link  
            rel="stylesheet" 
            title="Atom One Light"
            href="//unpkg.com/@highlightjs/cdn-assets@11.7.0/styles/atom-one-light.min.css">
        <script src="//unpkg.com/@highlightjs/cdn-assets@11.7.0/highlight.min.js"></script>
        <script>
            hljs.highlightAll()
        </script>
    </head>
    <!-- Axes with d3 -->
    <body>
        <div class="gm-lecture">
            <h1>Subdivision Surfaces</h1>
            <h2>Doo Sabin Subdivision</h2>
            <p>
                For each \(n\)-face, \(n\) new vertices are computed as follows: compute face and edges midpoints. 
                For each vertex of the input face consider the quadrilateral consisting of this vertex, the midpoints
                of the two incident edges and the midpoint of the face. Then, the new vertex is the midpoint of this
                quadrilateral. In the case the face is a quadrilateral, the position of the new vertex in yellow 
                in the image below, is computed as:
                \[
                    v_{new} = \frac{1}{4}(v + v_c + v_{e_1} + v_{e_2})
                \]
            </p>
            <div class="quadSubdivision" style="position: relative">
                <div>
                    <img src="../data/doo_sabin_1_270_1.png" height="220" style="bottom: 0">
                </div>                
                <div>
                    <img src="../data/doo_sabin_2_270_1.png" height="200" style="position: absolute; bottom: 0">
                </div>
            </div>
            <hr>
            <p>
                The general case for an hybrid mesh is illustrated in the images below.
            </p>
            <div class="dooSabin" style="position: relative">
                <div>
                    <img src="../data/doo_sabin_ngon_1.png" height="135">
                </div>                
                <div>
                    <img src="../data/doo_sabin_ngon_2.png" height="135">
                </div>
                <div>
                    <img src="../data/doo_sabin_ngon_3.png" height="135">
                </div>
                <div>
                    <img src="../data/doo_sabin_ngon_4.png" height="135">
                </div>
            </div>
            <hr>
            <div style="border: 1px solid #CC9999; padding: 15px; display: inline-block">
                <div id="threejs_canvas"></div>
                <script type="module" src="./dooSabin.js"></script>
            </div>
            <h3>The JavaScript Code</h3>
            <div style="width: 700px; margin-left: 10px;" id="hl-code"></div>
        </div>
    </body>
</html>
